.button {
  background: var(--color-glass-bg-variant);
  border: var(--border-width-medium) solid transparent;
  border-radius: var(--radius-lg);
  cursor: pointer;
  transition: var(--transition-fast);
  outline: none;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-xs);
  padding: var(--spacing-sm);
  aspect-ratio: 1;
  box-sizing: border-box;
  flex-shrink: 1;
  min-width: 0;

  /* Container-responsive sizing with aspect ratio preservation */
  width: min(100%, var(--button-size-xl));
  height: auto; /* aspect-ratio will control this */

  /* Absolute minimums for usability */
  min-width: var(--button-size-sm);
  min-height: var(--button-size-sm);

  /* Allow button to grow within container constraints */
  max-width: var(--button-size-xl);
  max-height: var(--button-size-xl);
}

/* Size variants */
.button.large {
  /* Slightly larger than base */
  max-width: var(--button-size-2xl);
  max-height: var(--button-size-2xl);
  min-width: var(--button-size-md);
  min-height: var(--button-size-md);
}

.button.small {
  /* Slightly smaller than base */
  max-width: var(--button-size-lg);
  max-height: var(--button-size-lg);
  min-width: var(--button-size-xs);
  min-height: var(--button-size-xs);
}

/* Icon styling */
.icon {
  font-size: var(--font-size-lg);
  line-height: 1;
}

.paintIcon {
  width: var(--icon-size-md);
  height: var(--icon-size-md);
  object-fit: contain;
}

.button.small .icon {
  font-size: var(--font-size-base);
}

.button.small .paintIcon {
  width: var(--icon-size-sm);
  height: var(--icon-size-sm);
}

/* Label styling */
.label {
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-semibold);
  line-height: 1;
  text-transform: uppercase;
}

.button.small .label {
  font-size: var(--font-size-2xs);
}

/* Paint mode variant */
.button.paint {
  background: var(--color-secondary-light);
  border-color: var(--color-secondary-border);
  color: var(--color-text-white-primary);
}

.button.paint:not(:disabled):hover {
  background: var(--color-primary-light);
  border-color: var(--color-primary-border);
  transform: translateY(var(--transform-lift));
}

.button.paint.active {
  background: var(--color-primary);
  border-color: var(--color-primary-dark);
  color: white;
}

.button.paint.active:not(:disabled):hover {
  background: var(--color-primary);
  border-color: var(--color-primary-dark);
  color: white;
}

/* Zoom variant */
.button.zoom {
  background: var(--color-secondary-light);
  border-color: var(--color-secondary-border);
  color: var(--color-text-black-primary);
}

.button.zoom:not(:disabled):hover {
  background: var(--color-primary-light);
  border-color: var(--color-primary-border);
  transform: translateY(var(--transform-lift));
}

/* Toggle variant - enabled state */
.button.toggle.active {
  background: var(--color-success);
  color: var(--color-text-white-inverse);
}

.button.toggle.active:not(:disabled):hover {
  background: var(--color-success-dark);
  transform: translateY(var(--transform-lift));
  box-shadow: var(--shadow-lg);
}

/* Toggle variant - disabled state */
.button.toggle:not(.active) {
  background: var(--color-danger);
  color: var(--color-text-white-inverse);
}

.button.toggle:not(.active):not(:disabled):hover {
  background: var(--color-danger-dark);
  transform: translateY(var(--transform-lift));
  box-shadow: var(--shadow-lg);
}

/* Focus state */
.button:focus {
  box-shadow: var(--shadow-focus);
}

/* Disabled state */
.button:disabled {
  background: var(--color-disabled-bg) !important;
  color: var(--color-disabled-text) !important;
  cursor: not-allowed !important;
  transform: none !important;
  box-shadow: none !important;
  border-color: transparent !important;
}

/* Mobile responsiveness - Mobile First */
@media (max-width: var(--breakpoint-tablet)) {
  .button {
    /* Allow more flexible sizing on mobile */
    width: min(100%, 6vh);
    max-width: var(--button-size-xl);
    min-width: var(--button-size-xs);
    padding: var(--spacing-xs);
  }

  .button.large {
    width: min(100%, 6vh);
    max-width: var(--button-size-xl);
    min-width: var(--button-size-sm);
  }

  .button.small {
    width: min(100%, 5vh);
    max-width: var(--button-size-lg);
    min-width: var(--button-size-xs);
  }

  .icon {
    font-size: var(--font-size-lg);
  }

  .button.small .icon {
    font-size: var(--font-size-base);
  }

  .label {
    font-size: var(--font-size-2xs);
  }

  .button.small .label {
    font-size: var(--font-size-2xs);
  }

  /* More aggressive shrinking on very small mobile screens */
  .button.large {
    max-width: var(--button-size-lg);
    min-width: var(--button-size-sm);
  }

  .button.small {
    max-width: var(--button-size-md);
    min-width: var(--button-size-xs);
  }

  .paintIcon {
    width: var(--icon-size-sm);
    height: var(--icon-size-sm);
  }

  .button.small .paintIcon {
    width: var(--icon-size-xs);
    height: var(--icon-size-xs);
  }
}
